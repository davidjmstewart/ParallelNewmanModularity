clear all;
close all;

fig = figure;
matrix_sizes = [100, 200, 400, 800, 1600, 3200, 6400, 12800, 25600, 51200];
% matrix_sizes = [1000000, 2000000, 3000000, 4000000];

parallel_timings = [0.000000166  0.000000130  0.000000128  0.000000130  0.000000128  0.000000128  0.000000130  0.000000128  0.000000126  0.000000126  0.000000126  0.000000124  0.000000128  0.000000128  0.000000124  0.000000130;
0.000000242  0.000002454  0.000000248  0.000000240  0.000000240  0.000000244  0.000000238  0.000000238  0.000000240  0.000000236  0.000000236  0.000000872  0.000001292  0.000000242  0.000000246  0.000001256;
0.000000464  0.000000462  0.000000466  0.000000464  0.000000458  0.000000458  0.000000462  0.000000464  0.000000458  0.000000458  0.000000464  0.000000470  0.000000466  0.000000464  0.000001580  0.000000460;
0.000004884  0.000000920  0.000000916  0.000000906  0.000050030  0.000008636  0.000000930  0.000000918  0.000002768  0.000000914  0.000000910  0.000003510  0.000001972  0.000000910  0.000000906  0.000000904;
0.000002098  0.000001820  0.000002340  0.000001842  0.000001820  0.000001838  0.000001832  0.000002092  0.000001850  0.000001828  0.000001834  0.000001832  0.000001930  0.000002146  0.000001836  0.000001830;
0.000006106  0.000005448  0.000022292  0.000003614  0.000006336  0.000018228  0.000012134  0.000003624  0.000005912  0.000003592  0.000048032  0.000009420  0.000004566  0.000004364  0.000011842  0.000006540;
0.000026526  0.000037546  0.000019782  0.000009608  0.000024636  0.000013626  0.000012314  0.000011630  0.000015956  0.000015430  0.000011258  0.000012608  0.000010452  0.000009078  0.000007898  0.000009556;
0.000020708  0.000015670  0.000017830  0.000014786  0.000035182  0.000032068  0.000031356  0.000019392  0.000016654  0.000027076  0.000018292  0.000054792  0.000017762  0.000020058  0.000017788  0.000016016;
0.000032954  0.000034306  0.000035106  0.000031180  0.000033132  0.000040118  0.000034430  0.000033664  0.000031232  0.000029642  0.000033114  0.000031824  0.000041946  0.000043784  0.000034488  0.000029526;
0.000064814  0.000063104  0.000061142  0.000071218  0.000065082  0.000067852  0.000063706  0.000062268  0.000063260  0.000066784  0.000063646  0.000062852  0.000065208  0.000071006  0.000064590  0.000063138;  ]

T = [1: 16];

sequential_averages = [
0.000000266 
0.000000516 
0.000001022 
0.000002040 
0.000004788 
0.000009014 
0.000112652 
0.000036980 
0.000078656 
0.000134962 
]
for i = 1:size(parallel_timings, 1)
    subplot(5,2,i); 
    hold on;
    grid on;
%     xlim([1 16]);
%     ylim([0 6]);
    plot(T, parallel_timings(i,:).^-1 * sequential_averages(i), 'LineWidth', 2);
    title(sprintf('%d element Vector',matrix_sizes(i)));
end

handle=axes(fig,'visible','off'); 
handle.XLabel.Visible='on';
handle.YLabel.Visible='on';
handle.Title.Visible='on';
ylabel(handle,'Speedup');
xlabel(handle,'Number of threads');
title(handle,'Speedup of parallelising dot product');
handle.Title.Position(2) = 1.05
grid on;

tic
VEC_SIZE = 500000000;
dot(rand(1,VEC_SIZE), rand(1,VEC_SIZE));
    toc