clear all;
close all;

fig = figure;
matrix_sizes = [100, 200, 400, 800, 1600, 3200, 6400, 12800, 25600, 51200];
% matrix_sizes = [1000000, 2000000, 3000000, 4000000];

parallel_timings = [0.000006280  0.000616310  0.001125730  0.001306470  0.001053880  0.000870780  0.002974720  0.003438960  0.001014990  0.000717970  0.000635770  0.000733000  0.000728450  0.000674240  0.000737340  0.000799720 
0.000017740  0.000238510  0.001843050  0.000750380  0.001034610  0.000842710  0.002925680  0.003080690  0.001304000  0.001018910  0.000702300  0.000604800  0.000679190  0.000842960  0.000776220  0.000885610 
0.000104780  0.000294470  0.002131110  0.000794250  0.000935200  0.002875610  0.002861450  0.004203480  0.001066730  0.000837550  0.000783750  0.000905730  0.000817980  0.000904400  0.000820780  0.000825670 
0.000470000  0.000880690  0.001377490  0.001326320  0.001308520  0.002017270  0.002476120  0.004220340  0.001184410  0.001122920  0.001130480  0.001057240  0.000909110  0.001054320  0.001391670  0.001282020 
0.001796890  0.001679020  0.002457870  0.001948160  0.001962490  0.003724350  0.003948080  0.005142010  0.002396970  0.001949470  0.001927140  0.002192660  0.002369690  0.002190840  0.002074030  0.002317240 
0.007430420  0.005315240  0.005202240  0.005213490  0.004428880  0.004602300  0.005473650  0.006536710  0.004519100  0.004714700  0.004515840  0.004289450  0.004276190  0.004406470  0.004536450  0.004583120 
0.031109620  0.022060040  0.016796910  0.014463160  0.013253540  0.013698770  0.013763700  0.013695300  0.013813010  0.012998240  0.013052300  0.014238300  0.013216670  0.013442910  0.013646580  0.013105860 
0.099189030  0.070543460  0.057756660  0.053912620  0.054895720  0.054125440  0.053241920  0.049255700  0.052124170  0.048279030  0.049199710  0.049398890  0.048511960  0.048948950  0.048170890  0.049214540 
0.385745280  0.259384790  0.225637360  0.202674270  0.201343870  0.190578800  0.184059690  0.186451430  0.187880770  0.183411940  0.185704230  0.186937740  0.186203350  0.188312800  0.189662480  0.182359290 
1.589026340  1.037889060  0.879397300  0.808926820  0.771178190  0.760980970  0.748503120  0.740351580  0.769645990  0.738154630  0.730147040  0.736801640  0.726110410  0.743994260  0.753183380  0.740227160]

T = [1: 16];

sequential_averages = [
0.000011110 
0.000044720 
0.000226360 
0.000862590 
0.003367710 
0.014032060 
0.053731390 
0.206258640 
0.801010900 
3.208655310  
]
for i = 1:size(parallel_timings, 1)
    subplot(5,2,i); 
    hold on;
    grid on;
%     xlim([1 16]);
%     ylim([0 6]);
    plot(T, parallel_timings(i,:).^-1 * sequential_averages(i), 'LineWidth', 2);
    title(sprintf('%d element Vector',matrix_sizes(i)));
end

handle=axes(fig,'visible','off'); 
handle.XLabel.Visible='on';
handle.YLabel.Visible='on';
handle.Title.Visible='on';
ylabel(handle,'Speedup');
xlabel(handle,'Number of threads');
title(handle,'Speedup of parallelising dot product');
handle.Title.Position(2) = 1.05
grid on;

tic
VEC_SIZE = 500000000;
dot(rand(1,VEC_SIZE), rand(1,VEC_SIZE));
    toc